#:import Factory kivy.factory.Factory

<TabbedPanelItem>
    markup: True
    background_normal: ''
    background_color: (128/255, 64/255, 0, 1)
    bold: True

<Button>
    markup: True
    bold: True
    font_size: 16
    background_normal: ''
    background_color: (128/255, 77/255, 0, 1)

<LabelDescription@Label>
    markup: True
    bold: True
    font_size: 16
    canvas.before:
        Color:
            rgba: (179/255, 89/255, 0 , 1)
        Rectangle:
            size: self.size
            pos: self.pos

<LabelValue@Label>
    markup: True
    bold: True
    font_size: 16
    color: (179/255, 89/255, 0 , 1)
    canvas.before:
        Color:
            rgba: (255/255, 204/255, 128/255 , 1)
        Rectangle:
            size: self.size
            pos: self.pos

<LabelDescription_2@LabelDescription>
    size_hint: 1, None
    height: 25

<LabelValue_2@LabelValue>
    size_hint: 1, None
    height: 25

<SeparateLabel@Label>
    markup: True
    bold: True
    size_hint: 0.01, 1
    canvas.before:
        Color:
            rgba: (0, 0, 0 , 1)
        Rectangle:
            size: self.size
            pos: self.pos

<SubContractButton@Button>
    size_hint: None, 1
    markup: True
    bold: True
    font_size: 16
    background_normal: ''
    background_color: (128/255, 77/255, 0, 1)
    width: 200

# Tabulator 1
<OutputLabel@Label>
    size_hint: 1, None
    height: 30
    font_size: 14
    # Text alignment adjust
    text_size: self.size
    padding_x: 10
    bold: True
    halign: 'left'
    valign: 'middle'
    canvas.before:
        Color:
            rgba: (1, 102/255, 102/255, 1)
        Rectangle:
            pos: self.pos
            size: self.size

<InputLabel@Label>
    size_hint: 1, None
    height: 30
    font_size: 14
    padding_x: 10
    bold: True
    canvas.before:
        Color:
            rgba: (102/255, 179/255, 1, 1)
        Rectangle:
            pos: self.pos
            size: self.size

<Input@TextInput>
    font_size: 14
    size_hint: 1, None
    height: 30

<LineLabel@Label>
    size_hint: 0.01, 1
    canvas.before:
        Color:
            rgba: (0, 0, 0, 1)
        Rectangle:
            pos: self.pos
            size: self.size

<ViewButton@Button>
    size_hint: (1, None)
    height: 30
    background_normal: ''
    background_color: 0, 0, 1, 1
    bold: True
    font_size: 14

<NonepayableButton@Button>
    size_hint: (1, None)
    height: 30
    background_normal: ''
    background_color: 1, 173/255, 51/255, 1
    bold: True
    font_size: 14

<PayableButton@Button>
    size_hint: (1, None)
    height: 30
    background_normal: ''
    background_color: 1, 0, 0, 1
    bold: True
    font_size: 14

<TextInput>
    multiline: False
    font_size: 14

<ConstructorLabel@Label>
    size_hint: None, 1
    width: 150
    canvas.before:
        Color:
            rgba: (179 / 255, 89 / 255, 0, 1)
        Rectangle:
            pos: self.pos
            size: self.size

<ClickInput@TextInput>

<FileChooser>

<MyLayout>
    do_default_tab: False
    tab_width: 200
    tab_height: 40
    size_hint: 1, 1
    pos_hint: {'center_x': .5, 'center_y': .5}
    tab_pos: 'top_left'
    # top_right, top_left, bottom_right, bottom_left, bottom_middle, right_top, left_top

    TabbedPanelItem:
        text: '[size=20][color=#ff8000][b]Connect to SC[/b][/color][/size]'
        BoxLayout:
            orientation: 'vertical'
            spacing: 3
            padding: 3
            row_force_default: True
            row_default_height: 20
            # Background color in Tab
            canvas:
                Color:
                    rgba: (1, 1/2, 0, 1)
                Rectangle:
                    size: self.size
                    pos: self.pos
            # Load Smart Contract
            GridLayout:
                rows: 1
                cols: 4
                spacing: 2.5
                padding: 2.5
                size_hint: 1, .09
                Button:
                    text: 'Clear'
                    size_hint: 0.1, 1
                    on_release: root.clear_sc_address()
                Button:
                    id: UploadedSC
                    text: 'Load Uploaded SC'
                    size_hint: 0.2, 1
                    on_release: root.activate_uploaded_sc()
                    disabled: False
                Button:
                    id: ExternalSC
                    text: 'Load External SC:'
                    size_hint: 0.2, 1
                    on_release: root.connect_to_sc()
                    disabled: False
                TextInput:
                    text: ''
                    id: ContractAddress
                    size_hint: 0.6, 1
                    on_focus: root.test_focus(self.focus)
            # Commands line
            BoxLayout:
                orientation: 'horizontal'
                spacing: 2.5
                padding: 2.5
                size_hint: 1, 0.08
                LabelDescription:
                    text: 'Payable commands'
                SeparateLabel:
                LabelDescription:
                    text: 'Nonpayable commands'
                SeparateLabel:
                LabelDescription:
                    text: 'View commands'
                SeparateLabel:
                Button:
                    text: 'Update'
                    size_hint: 0.6, 1
                    background_normal: ''
                    background_color: (0/255, 77/255, 0, 1)
                    on_release: root.update_prices()
                Button:
                    size_hint: 0.6, 1
                    text: 'Reset Gas meter'
                    background_normal: ''
                    background_color: (0/255, 77/255, 0, 1)
                    on_release: root.reset_gas_meter()
            SeparateLabel:
                size_hint: 1, 0.007
            # SC buttons
            BoxLayout:
                size_hint: 1, 0.55
                orientation: 'horizontal'
                size: root.width, root.height
                spacing: 5
                padding: 5
                ScrollView:
                    do_scroll_x: False
                    do_scroll_y: True
                    GridLayout:
                        id: payable_buttons
                        size_hint_y: None
                        height: self.minimum_height
                        cols: 1
                        orientation: 'tb-lr'
                        spacing: 2.5
                        padding: 2.5
                LineLabel:
                ScrollView:
                    do_scroll_x: False
                    do_scroll_y: True
                    GridLayout:
                        id: nonpayable_buttons
                        size_hint_y: None
                        height: self.minimum_height
                        cols: 1
                        orientation: 'tb-lr'
                        spacing: 2.5
                        padding: 2.5
                LineLabel:
                ScrollView:
                    do_scroll_x: False
                    do_scroll_y: True
                    GridLayout:
                        id: view_buttons
                        size_hint_y: None
                        height: self.minimum_height
                        cols: 1
                        orientation: 'tb-lr'
                        spacing: 2.5
                        padding: 2.5
                LineLabel:
                ScrollView:
                    do_scroll_x: False
                    do_scroll_y: True
                    size_hint: 1.2, 1
                    GridLayout:
                        size_hint_y: None
                        height: self.minimum_height
                        rows: 10
                        cols: 2
                        orientation: 'tb-lr'
                        spacing: 2.5
                        padding: 2.5
                        LabelDescription_2:
                            text: 'ETH Price'
                        LabelValue_2:
                            id: eth_price_sc
                            text: ''
                        LabelDescription_2:
                            text: 'Wallet Balance'
                        LabelValue_2:
                            id: wallet_balance_sc
                            text: ''
                        LabelDescription_2:
                            text: 'Network Active'
                        LabelValue_2:
                            id: network_active_sc
                            text: ''
                        # Row 2
                        LabelDescription_2:
                            text: 'Address Active'
                        LabelValue_2:
                            id: address_active_sc
                            text: ''
                        LabelDescription_2:
                            text: 'Total Gas used'
                        LabelValue_2:
                            id: total_gas_used_sc
                            text: ''
                        LabelDescription_2:
                            text: 'Total Gwei spent'
                        LabelValue_2:
                            id: total_gwei_spent_sc
                            text: ''
                        LabelDescription_2:
                            text: 'Total USD spent:'
                        LabelValue_2:
                            id: total_usd_spent_sc
                            text: ''
                        LabelDescription_2:
                            text: 'Last Gas spent'
                        LabelValue_2:
                            id: last_gas_spent_sc
                            text: ''
                        LabelDescription_2:
                            text: 'Last Gwei spent'
                        LabelValue_2:
                            id: last_gwei_spent_sc
                            text: ''
                        LabelDescription_2:
                            text: 'Last USD spent'
                        LabelValue_2:
                            id: last_usd_spent_sc
                            text: ''
                # Gas Estimate
            GridLayout:
                rows: 1
                cols: 9
                spacing: 2.5
                padding: 2.5
                size_hint: 1, .08
                Button:
                    text: 'Calculate'
                    disabled: True
                    id: calculate_transaction
                    size_hint: .5, 1
                    bold: True
                    on_release: root.calculate_transaction()
                SeparateLabel:
                Button:
                    id: currency_selection
                    text: ''
                    on_release: root.currency_selection()
                    size_hint: .7, 1
                LabelDescription:
                    text: 'Gas Estimate'
                    size_hint: .7, 1
                LabelDescription:
                    text: 'Gas Cost'
                    size_hint: 0.7, 1
                LabelDescription:
                    text: 'Gas Cost (USD)'
                    size_hint: .8, 1
                LabelDescription:
                    text: 'Transaction Cost'
                    size_hint: .8, 1
                LabelDescription:
                    text: 'Transaction Cost (USD)'
                LabelDescription:
                    text: 'Verification Status'
                    size_hint: .9, 1
            GridLayout:
                rows: 1
                cols: 9
                spacing: 2.5
                padding: 2.5
                size_hint: 1, .08
                Button:
                    text: 'Transact'
                    disabled: True
                    id: execute
                    size_hint: .5, 1
                    bold: True
                    on_release: root.transact()
                SeparateLabel:
                TextInput:
                    id: currency_input
                    font_size: 12
                    size_hint: .7, 1
                LabelValue:
                    id: gas_transaction
                    text: ''
                    size_hint: 0.7, 1
                LabelValue:
                    id: gas_cost_transaction
                    text: ''
                    size_hint: 0.7, 1
                LabelValue:
                    id: gas_cost_transaction_usd
                    text: ''
                    size_hint: .8, 1
                LabelValue:
                    id: gwei_cost_transaction
                    text: ''
                    size_hint: .8, 1
                LabelValue:
                    id: usd_cost_transaction
                    text: ''
                LabelValue:
                    id: verification_status_sc
                    text: ''
                    size_hint: .9, 1
            BoxLayout:
                orientation: 'horizontal'
                size: root.width, root.height
                spacing: 2.5
                padding: 2.5
                size_hint: 1, 0.35
                BoxLayout:
                    orientation: 'vertical'
                    size: root.width, root.height
                    spacing: 2.5
                    padding: 2.5
                    LabelDescription:
                        text: 'Inputs'
                        size_hint: 1, .25
                    ScrollView:
                        do_scroll_x: False
                        do_scroll_y: True
                        GridLayout:
                            size_hint_y: None
                            height: self.minimum_height
                            id: input_layout
                            cols: 2
                            orientation: 'lr-tb'
                            spacing: 2.5
                            padding: 2.5
                LineLabel:
                    size_hint: 0.008, 1
                BoxLayout:
                    orientation: 'vertical'
                    size: root.width, root.height
                    spacing: 2.5
                    padding: 2.5
                    LabelDescription:
                        text: 'Outputs'
                        size_hint: 1, .25
                        spacing: 2.5
                    ScrollView:
                        do_scroll_x: False
                        do_scroll_y: True
                        GridLayout:
                            size_hint_y: None
                            height: self.minimum_height
                            id: output_layout
                            cols: 1
                            orientation: 'lr-tb'
                            spacing: 2.5
            LabelValue:
                id: StatusBar_1
                font_size: 16
                size_hint: 1, 0.08
                text: 'Status bar'
# ######################################## SC Upload ##########################################
    TabbedPanelItem:
        text: '[size=20][color=#ff8000][b]SC Upload[/b][/color][/size]'
        BoxLayout:
            # Background color in Tab
            orientation: 'vertical'
            padding: 3
            spacing: 2.5
            canvas:
                Color:
                    rgba: (1, 1/2, 0, 1)
                Rectangle:
                    size: self.size
                    pos: self.pos
            # Row 1
            GridLayout:
                rows: 2
                cols: 8
                spacing: 5
                padding: 5
                size_hint: 1, .2
                LabelDescription:
                    size_hint: .7, 1
                    text: 'ETH Price'
                LabelDescription:
                    size_hint: .9, 1
                    text: 'Network Active'
                LabelDescription:
                    size_hint: 1, 1
                    text: 'Address Active'
                LabelDescription:
                    size_hint: 1, 1
                    text: 'Wallet Balance'
                LabelDescription:
                    size_hint: 1, 1
                    text: 'Gas Price (main)'
                LabelDescription:
                    size_hint: 1, 1
                    text: 'Gas Price (USD)'
                LabelDescription:
                    size_hint: 1.1, 1
                    text: 'Conf. Time (main)'
                Button:
                    size_hint: 1, 1
                    text: 'Update'
                    background_normal: ''
                    background_color: (0/255, 77/255, 0, 1)
                    on_release: root.update_prices()
                # Row 2
                LabelValue:
                    id: ETH_Price
                    size_hint: .7, 1
                    text: ''
                LabelValue:
                    id: active_network
                    size_hint: .9, 1
                    text: ''
                LabelValue:
                    size_hint: 1, 1
                    id: address_active
                    text: ''
                LabelValue:
                    id: Wallet_Balance
                    size_hint: 1, 1
                    text: ''
                LabelValue:
                    id: Gas_Price
                    size_hint: 1, 1
                    text: ''
                LabelValue:
                    id: Gas_Price_USD
                    size_hint: 1, 1
                    text: ''
                LabelValue:
                    id: Conf_Time
                    size_hint: 1.1, 1
                    text: ''
                Button:
                    size_hint: 1, 1
                    text: 'Reset Gas meter'
                    background_normal: ''
                    background_color: (0/255, 77/255, 0, 1)
                    on_release: root.reset_gas_meter()
            SeparateLabel:
                size_hint: 1, 0.007
            GridLayout:
                rows: 2
                cols: 7
                spacing: 5
                padding: 5
                orientation: 'tb-lr'
                size_hint: 1, .2
                LabelDescription:
                    text: 'Compiler set'
                    size_hint: 1.1, 1
                LabelValue:
                    id: compiler_set
                    text: ''
                    size_hint: 1.1, 1
                LabelDescription:
                    text: 'Total Gas used'
                    size_hint: .9, 1
                LabelValue:
                    id: total_gas_used
                    text: ''
                    size_hint: .9, 1
                LabelDescription:
                    text: 'Total Gwei spent'
                    size_hint: 1, 1
                LabelValue:
                    id: total_gwei_spent
                    text: ''
                    size_hint: 1, 1
                LabelDescription:
                    text: 'Total USD spent'
                    size_hint: .9, 1
                LabelValue:
                    id: total_usd_spent
                    text: ''
                    size_hint: .9, 1
                LabelDescription:
                    text: 'Last Gas spent'
                    size_hint: .9, 1
                LabelValue:
                    id: last_gas_spent
                    text: ''
                    size_hint: .9, 1
                LabelDescription:
                    text: 'Last Gwei spent'
                    size_hint: .9, 1
                LabelValue:
                    id: last_gwei_spent
                    text: ''
                    size_hint: .9, 1
                LabelDescription:
                    text: 'Last USD spent'
                    size_hint: .9, 1
                LabelValue:
                    id: last_usd_spent
                    text: ''
                    size_hint: .9, 1

            LabelDescription:
                font_size: 16
                size_hint: 1, 0.08
                text: 'File selection'
# ####################################
            # Contract file load
            GridLayout:
                rows: 1
                cols: 4
                spacing: 5
                padding: 2.5
                size_hint: 1, .1
                Button:
                    id: ChooseSC
                    text: 'Choose SC'
                    size_hint: .15, 1
                    on_release: root.file_chooser()
                    disabled: False
                Button:
                    text: 'Clear'
                    size_hint: .15, 1
                    on_release: root.clear()
                Button:
                    id: compile_sc
                    text: 'Compile'
                    size_hint: .15, 1
                    on_release: root.compile()
                    disabled: True
                TextInput:
                    font_size: 16
                    size_hint: .8, 1
                    id: FilePath
                    text: ''
                    valign: 'center'
            # Contract selection
            BoxLayout:
                orientation: 'horizontal'
                spacing: 5
                padding: 2.5
                size_hint: 1, 0.1
                LabelDescription:
                    id: select_sc
                    size_hint: 0.15, 1
                    text: 'Select SC:'
                    # on_release: root.select_subcontract()
                    # disabled: True
                ScrollView:
                    do_scroll_y: False
                    do_scroll_x: True
                    GridLayout:
                        size_hint_x: None
                        width: self.minimum_width
                        rows: 1
                        orientation: 'lr-tb'
                        spacing: 2.5
                        padding: 2.5
                        # size_hint: 1, 1
                        id: ContractSelection
            LabelDescription:
                text: 'Constructor'
                size_hint: 1, .08
            # Constructor
            BoxLayout:
                orientation: 'vertical'
                spacing: 2.5
                padding: 2.5
                size_hint: 1, .2
                ScrollView:
                    do_scroll_y: False
                    do_scroll_x: True
                    GridLayout:
                        size_hint_x: None
                        width: self.minimum_width
                        rows: 2
                        orientation: 'tb-lr'
                        id: Constructor
                        padding: 2.5
                        spacing: 2.5
                        size_hint: 1, 1
            # Smart Contract Operations
            LabelDescription:
                text: 'Smart Contract Operations'
                spacing: 3
                size_hint: 1, 0.08
            BoxLayout:
                orientation: 'vertical'
                spacing: 2
                padding: 2
                size_hint: 1, 0.3
                GridLayout:
                    rows: 2
                    cols: 7
                    spacing: 3
                    padding: 3
                    size_hint: 1, 0.6
                    # Row 1
                    Button:
                        id: Calculate
                        text: 'Calculate'
                        size_hint: .6, 1
                        on_release: root.calculate_upload()
                        disabled: True
                    LabelDescription:
                        text: 'Gas Estimate'
                        size_hint: 1, 1
                    LabelDescription:
                        text: 'Upload Cost'
                        size_hint: 1, 1
                    LabelDescription:
                        text: 'Gas Cost'
                        size_hint: 1, 1
                    LabelDescription:
                        text: 'Upload Cost (USD)'
                        size_hint: 1, 1
                    LabelDescription:
                        text: 'Gas Cost (USD)'
                        size_hint: 1, 1
                    LabelDescription:
                        text: 'Verification status'
                        size_hint: 1, 1
                    # Row2
                    Button:
                        id: DeploySC
                        text: 'Deploy SC'
                        size_hint: .6, 1
                        on_release: root.deploy_sc()
                        disabled: True
                    LabelValue:
                        text: ''
                        size_hint: 1, 1
                        id: GasEstimate
                    LabelValue:
                        text: ''
                        size_hint: 1, 1
                        id: UploadCost
                    LabelValue:
                        text: ''
                        size_hint: 1, 1
                        id: GasCost
                    LabelValue:
                        text: ''
                        size_hint: 1, 1
                        id: UploadCostUSD
                    LabelValue:
                        text: ''
                        size_hint: 1, 1
                        id: GasCostUSD
                    LabelValue:
                        id: verification_status
                        text: ''
                        size_hint: 1, 1

                LabelValue:
                    id: StatusBar
                    font_size: 16
                    size_hint: 1, 0.3
                    text: 'Status bar'
# ############################################ Settings Panel ##################################
    TabbedPanelItem:
        text: '[size=20][color=#ff8000][b]Settings[/b][/color][/size]'
        BoxLayout:
            orientation: 'vertical'
            GridLayout:
                spacing: 5
                padding: 5
                rows: 10
                cols:2
                # Background color in Tab
                canvas:
                    Color:
                        rgba: (1, 1/2, 0, 1)
                    Rectangle:
                        size: self.size
                        pos: self.pos
                # Wallet address
                LabelDescription:
                    text: 'Wallet Address'
                    size_hint: 0.2, 1
                TextInput:
                    id: AddressEnter
                    text: ''
                    on_focus: root.address_enter(self.focus)
                # Private Key
                LabelDescription:
                    text: 'Private Key'
                    size_hint: 0.2, 1
                TextInput:
                    id: PrivateKeyEnter
                    text: ''
                    on_focus: root.private_key_enter(self.focus)
                # Ganache Address
                LabelDescription:
                    text: 'Ganache Address'
                    size_hint: 0.2, 1
                TextInput:
                    id: GanacheAddressEnter
                    text: ''
                    on_focus: root.ganache_address_enter(self.focus)
                # Ganache Private Key
                LabelDescription:
                    text: 'Ganache Private Key'
                    size_hint: 0.2, 1
                TextInput:
                    id: GanachePrivateKeyEnter
                    text: ''
                    on_focus: root.ganache_private_key_enter(self.focus)
                # API
                LabelDescription:
                    text: 'API'
                    size_hint: 0.2, 1
                TextInput:
                    id: APIEnter
                    text: ''
                    on_focus: root.api_enter(self.focus)
                # Infura
                LabelDescription:
                    text: 'Infura'
                    size_hint: 0.2, 1
                TextInput:
                    id: InfuraEnter
                    text: ''
                    on_focus: root.infura_enter(self.focus)
                # Gas Limit
                LabelDescription:
                    text: 'Gas Limit'
                    size_hint: 0.2, 1
                TextInput:
                    id: GasEnter
                    text: ''
                    on_focus: root.gas_enter(self.focus)
                # Ganache
                LabelDescription:
                    text: 'Ganache RPC'
                    size_hint: 0.2, 1
                TextInput:
                    id: GanacheRPCEnter
                    text: ''
                    on_focus: root.ganache_rpc_enter(self.focus)
                # Ganache ID
                LabelDescription:
                    text: 'Ganache ID'
                    size_hint: 0.2, 1
                TextInput:
                    id: GanacheIDEnter
                    text: ''
                    on_focus: root.ganache_id_enter(self.focus)
                # Solidity Compiler
                LabelDescription:
                    text: 'Solidity Compiler'
                    size_hint: 0.2, 1
                TextInput:
                    id: SolidityCompiler
                    text: ''
                    on_focus: root.solidity_compiler_enter(self.focus)
            GridLayout:
                spacing: 5
                padding: 5
                rows: 2
                cols: 7
                size_hint: 1, .2
                orientation: 'lr-tb'
                # Background color in Tab
                canvas:
                    Color:
                        rgba: (1, 1/2, 0, 1)
                    Rectangle:
                        size: self.size
                        pos: self.pos
                LabelDescription:
                    text: 'Wallet Address selection'
                    size_hint: 1.8, 1
                ToggleButton:
                    id: Address1
                    text: 'Address 1'
                    on_state: root.address_1()
                ToggleButton:
                    id: Address2
                    text: 'Address 2'
                    on_state: root.address_2()
                ToggleButton:
                    id: Address3
                    text: 'Address 3'
                    on_state: root.address_3()
                ToggleButton:
                    id: Address4
                    text: 'Address 4'
                    on_state: root.address_4()
                ToggleButton:
                    id: Address5
                    text: 'Address 5'
                    on_state: root.address_5()
                ToggleButton:
                    id: Address6
                    text: 'Address 6'
                    on_state: root.address_6()
                # Network selection
                LabelDescription:
                    text: 'Network selection'
                    size_hint: 1.8, 1
                ToggleButton:
                    id: Mainnet
                    text: 'Mainnet'
                    on_state: root.mainnet_network()
                ToggleButton:
                    id: Goerli
                    text: 'Goerli'
                    on_state: root.goerli_network()
                ToggleButton:
                    id: Kovan
                    text: 'Kovan'
                    on_state: root.kovan_network()
                ToggleButton:
                    id: Rinkeby
                    text: 'Rinkeby'
                    on_state: root.rinkeby_network()
                ToggleButton:
                    id: Ropsten
                    text: 'Ropsten'
                    on_state: root.ropsten_network()
                ToggleButton:
                    id: Ganache
                    text: 'Ganache'
                    on_state: root.ganache_network()
